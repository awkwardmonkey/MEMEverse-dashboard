(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c67c9a0"],{"62ad":function(e,t,o){"use strict";o("4160"),o("caad"),o("13d5"),o("45fc"),o("4ec9"),o("a9e3"),o("b64b"),o("d3b7"),o("ac1f"),o("3ca3"),o("5319"),o("2ca0"),o("159b"),o("ddb0");var a=o("ade3"),n=o("5530"),i=(o("4b85"),o("2b0e")),s=o("d9f7"),r=o("80d2"),l=["sm","md","lg","xl"],c=function(){return l.reduce((function(e,t){return e[t]={type:[Boolean,String,Number],default:!1},e}),{})}(),d=function(){return l.reduce((function(e,t){return e["offset"+Object(r["G"])(t)]={type:[String,Number],default:null},e}),{})}(),m=function(){return l.reduce((function(e,t){return e["order"+Object(r["G"])(t)]={type:[String,Number],default:null},e}),{})}(),u={col:Object.keys(c),offset:Object.keys(d),order:Object.keys(m)};function v(e,t,o){var a=e;if(null!=o&&!1!==o){if(t){var n=t.replace(e,"");a+="-".concat(n)}return"col"!==e||""!==o&&!0!==o?(a+="-".concat(o),a.toLowerCase()):a.toLowerCase()}}var p=new Map;t["a"]=i["a"].extend({name:"v-col",functional:!0,props:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({cols:{type:[Boolean,String,Number],default:!1}},c),{},{offset:{type:[String,Number],default:null}},d),{},{order:{type:[String,Number],default:null}},m),{},{alignSelf:{type:String,default:null,validator:function(e){return["auto","start","end","center","baseline","stretch"].includes(e)}},tag:{type:String,default:"div"}}),render:function(e,t){var o=t.props,n=t.data,i=t.children,r=(t.parent,"");for(var l in o)r+=String(o[l]);var c=p.get(r);return c||function(){var e,t;for(t in c=[],u)u[t].forEach((function(e){var a=o[e],n=v(t,e,a);n&&c.push(n)}));var n=c.some((function(e){return e.startsWith("col-")}));c.push((e={col:!n||!o.cols},Object(a["a"])(e,"col-".concat(o.cols),o.cols),Object(a["a"])(e,"offset-".concat(o.offset),o.offset),Object(a["a"])(e,"order-".concat(o.order),o.order),Object(a["a"])(e,"align-self-".concat(o.alignSelf),o.alignSelf),e)),p.set(r,c)}(),e(o.tag,Object(s["a"])(n,{class:c}),i)}})},ae79:function(e,t,o){"use strict";o.r(t);var a,n,i,s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",{attrs:{id:"inspire"}},[o("v-main",[o("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[o("v-row",{attrs:{align:"center",justify:"center"}},[o("v-col",{attrs:{xl:"4",lg:"4",md:"4",xs:"12",sm:"12"}},[o("RegisterDomain")],1),o("v-col",{attrs:{xl:"6",lg:"6",md:"6",xs:"12",sm:"12"}},[o("div",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"80vh"}},[o("DomainList")],1)])],1)],1)],1)],1)},r=[],l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.domains,loading:e.domainDataTableLoading,search:e.search,"sort-by":"user"},on:{"click:row":e.rowClicked},scopedSlots:e._u([{key:"top",fn:function(){return[o("v-toolbar",{attrs:{flat:""}},[o("v-toolbar-title",[e._v("Domains")]),o("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),o("v-spacer"),o("v-text-field",{staticClass:"mt-7 mx-2",attrs:{solo:"",label:"Search",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),o("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[o("v-btn",e._g(e._b({staticClass:"info",attrs:{color:"input",small:"",fab:""},on:{click:function(t){return e.retrieveDomainList()}}},"v-btn",n,!1),a),[o("v-icon",[e._v(" mdi-refresh ")])],1)]}}])},[o("span",[e._v("Refresh Domain List")])]),o("v-dialog",{attrs:{width:"500",color:"primary"},model:{value:e.domainDialogShow,callback:function(t){e.domainDialogShow=t},expression:"domainDialogShow"}},[o("v-card",[o("v-card-title",[e._v(" "+e._s(e.domainDialog.name)+" ")]),o("v-card-text",{staticClass:"text-left"},[o("v-list",{staticClass:"transparent"},[o("v-list-item",[o("v-list-item-content",[o("v-list-item-title",[e._v(" Domain Name ")]),o("v-list-item-subtitle",[e._v(" "+e._s(e.domainDialog.name)+" ")])],1)],1),o("v-list-item",[o("v-list-item-content",[o("v-list-item-title",[e._v(" Users ")]),o("v-list-item-subtitle",[e._v(" "+e._s(e.domainDialog.users)+" ")])],1)],1),o("v-list-item",[o("v-list-item-content",[o("v-list-item-title",[e._v(" Ice Server ")]),o("v-list-item-subtitle",[e._v(" "+e._s(e.domainDialog.iceServer)+" ")])],1)],1),o("v-list-item",[o("v-list-item-content",[o("v-list-item-title",[e._v(" Domain ID ")]),o("v-list-item-subtitle",[e._v(" "+e._s(e.domainDialog.domainID)+" ")])],1)],1),o("v-list-item",[o("v-list-item-content",[o("v-list-item-title",[e._v(" Owner Account ID ")]),o("v-list-item-subtitle",[e._v(" "+e._s(e.domainDialog.sponsorAccountId)+" ")])],1)],1),o("v-list-item",[o("v-list-item-content",[o("v-list-item-title",[e._v(" Protocol ")]),o("v-list-item-subtitle",[e._v(" "+e._s(e.domainDialog.protocol)+" ")])],1)],1),o("v-list-item",[o("v-list-item-content",[o("v-list-item-title",[e._v(" Version ")]),o("v-list-item-subtitle",[e._v(" "+e._s(e.domainDialog.version)+" ")])],1)],1),o("v-list-item",[o("v-expansion-panels",[o("v-expansion-panel",[o("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[o("v-icon",{attrs:{color:"primary"}},[e._v("mdi-information-variant")])]},proxy:!0}])},[e._v(" Public Key ")]),o("v-expansion-panel-content",[e._v(" "+e._s(e.domainDialog.publicKey)+" ")])],1)],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[o("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[o("v-icon",e._g(e._b({attrs:{small:"",color:"red",disabled:!e.canEditDomain(a.sponsorAccountId)},on:{click:function(t){return t.stopPropagation(),e.deleteDomain(a.domainID,a.name)}}},"v-icon",i,!1),n),[e._v(" mdi-delete-alert ")])]}}],null,!0)},[o("span",[e._v("Delete Domain")])])]}},{key:"item.images",fn:function(e){var t=e.item;return[o("v-avatar",[o("img",{attrs:{src:t.images.thumbnail}})])]}}])})},c=[],d=(o("4160"),o("b0c0"),o("159b"),o("8552")),m={name:"DomainList",props:{source:String},data:function(){return{dialog:!1,headers:[{text:"Domain Name",align:"start",sortable:!0,value:"name"},{text:"Version",value:"version"},{text:"Users",value:"users"},{text:"Actions",value:"actions",sortable:!1}],domainDataTableLoading:!1,domainDialogShow:!1,domainDialog:{name:"",users:"",domainID:"",version:"",protocol:"",publicKey:"",iceServer:"",sponsorAccountId:"",networkingMode:""},search:null,editingDomain:null,domains:[]}},watch:{},created:function(){a=this,n=this.$store.state,i=n.metaverseConfig.server,this.initialize()},computed:{},methods:{initialize:function(){this.retrieveDomainList()},sendEvent:function(e,t){d["a"].$emit(e,t)},rowClicked:function(e){this.domainDialogShow=!0,this.domainDialog.name=e.name,this.domainDialog.domainID=e.domainID,this.domainDialog.version=e.version,this.domainDialog.protocol=e.protocol,this.domainDialog.publicKey=e.publicKey,this.domainDialog.iceServer=e.iceServer,this.domainDialog.sponsorAccountId=e.sponsorAccountId,this.domainDialog.networkingMode=e.networkingMode,this.domainDialog.users=e.users},canEditDomain:function(e){return n.account.useAsAdmin||n.account.accountId===e},beginEditingDomain:function(e){this.editingDomain=e},savePlaceName:function(e){this.postUpdateDomain(this.editingDomain,{place_name:e})},deleteDomain:function(e,t){confirm("Are you sure you want to delete "+t+"?")&&this.postDeleteDomain(e)},retrieveDomainList:function(){var e=window.$.param({asAdmin:n.account.useAsAdmin,per_page:999});e="?"+e,this.domainDataTableLoading=!0,window.$.ajax({type:"GET",url:i+"/api/v1/domains"+e,contentType:"application/json"}).done((function(e){a.domainDataTableLoading=!1,a.domains=[],e.data.domains.forEach((function(e,t){a.domains.push({name:e.name,domainID:e.domainId,users:e.total_users,protocol:e.protocol_version,publicKey:e.public_key,version:e.version,iceServer:e.ice_server_address,sponsorAccountId:e.sponsor_account_id,networkingMode:e.networking_mode})}))})).fail((function(e){console.info("Failed to retrieve domain list: ",e),a.domainDataTableLoading=!1,a.$store.commit("mutate",{property:"error",with:{title:"Failed to retrieve domain list.",code:"2",full:e.responseJSON.message}}),"Invalid token"!==e.responseJSON.message.toLowerCase()&&"jwt malformed"!==e.responseJSON.message.toLowerCase()||a.logout(),a.sendEvent("open-dialog",{which:"ErrorOccurred",shouldShow:!0})}))},postUpdateDomain:function(e,t){var o=window.$.param({asAdmin:n.account.useAsAdmin});o="?"+o,window.$.ajax({type:"POST",url:i+"/api/v1/domains/"+e+o,contentType:"application/json",data:{domain:{dataToUpdate:t}}}).done((function(t){console.info("Successfully updated domain:",e),a.retrieveDomainList()})).fail((function(t){console.info("Failed to update domain:",e),a.$store.commit("mutate",{property:"error",with:{title:"Failed to update domain:"+e,code:"3",full:t.responseJSON.message}}),a.sendEvent("open-dialog",{which:"ErrorOccurred",shouldShow:!0}),a.retrieveDomainList()}))},postDeleteDomain:function(e){var t=window.$.param({asAdmin:n.account.useAsAdmin});t="?"+t,window.$.ajax({type:"DELETE",url:i+"/api/v1/domains/"+e+t}).done((function(t){console.info("Successfully deleted domain:",e),a.retrieveDomainList()})).fail((function(t){console.info("Failed to delete domain:",e),a.$store.commit("mutate",{property:"error",with:{title:"Failed to delete domain:"+e,code:"3",full:t.responseJSON.message}}),a.sendEvent("open-dialog",{which:"ErrorOccurred",shouldShow:!0}),a.retrieveDomainList()}))}}},u=m,v=o("2877"),p=o("6544"),f=o.n(p),g=o("8212"),b=o("8336"),h=o("b0af"),D=o("99d9"),w=o("8fea"),_=o("169a"),k=o("ce7e"),S=o("cd55"),y=o("49e2"),T=o("c865"),x=o("0393"),C=o("132d"),V=o("8860"),L=o("da13"),O=o("5d23"),I=o("2fa4"),j=o("8654"),A=o("71d9"),E=o("2a7f"),N=o("3a2f"),$=Object(v["a"])(u,l,c,!1,null,null,null),P=$.exports;f()($,{VAvatar:g["a"],VBtn:b["a"],VCard:h["a"],VCardText:D["b"],VCardTitle:D["c"],VDataTable:w["a"],VDialog:_["a"],VDivider:k["a"],VExpansionPanel:S["a"],VExpansionPanelContent:y["a"],VExpansionPanelHeader:T["a"],VExpansionPanels:x["a"],VIcon:C["a"],VList:V["a"],VListItem:L["a"],VListItemContent:O["a"],VListItemSubtitle:O["b"],VListItemTitle:O["c"],VSpacer:I["a"],VTextField:j["a"],VToolbar:A["a"],VToolbarTitle:E["a"],VTooltip:N["a"]});var J,F,G,K=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",[o("v-list-item",{staticClass:"mb-4",attrs:{"three-line":""}},[o("v-list-item-content",[o("v-list-item-title",{staticClass:"headline mb-4"},[e._v(" Register A Domain ")]),o("v-list-item-subtitle",[e._v(" Use the access token that is generated to allow your domain server to log in to the metaverse. ")])],1)],1),o("v-divider"),o("v-list-item",{staticClass:"mb-4"},[o("kbd",{staticClass:"text-center mt-4",staticStyle:{width:"100%","font-size":"1.0rem !important"},attrs:{id:"generatedToken"},domProps:{textContent:e._s(e.generatedToken)}}),o("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[o("v-btn",e._g(e._b({directives:[{name:"show",rawName:"v-show",value:e.generatedToken,expression:"generatedToken"}],staticClass:"ml-3 mt-3 info",attrs:{color:"input",small:"",fab:""},on:{click:e.copyGeneratedToken}},"v-btn",n,!1),a),[o("v-icon",[e._v("mdi-content-copy")])],1)]}}])},[o("span",[e._v("Copy")])])],1),o("v-list-item-subtitle",{domProps:{textContent:e._s(e.generatedTokenText)}}),o("v-card-actions",[o("v-spacer"),o("v-btn",{staticClass:"info",attrs:{rounded:"",color:"input"},on:{click:function(t){return e.postGenerateDomainToken()}}},[e._v(" Generate ")])],1),o("v-snackbar",{attrs:{color:"success"},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.attrs;return[o("v-btn",e._b({attrs:{text:""},on:{click:function(t){e.copiedToClipboardSnackbar=!1}}},"v-btn",a,!1),[e._v(" Close ")])]}}]),model:{value:e.copiedToClipboardSnackbar,callback:function(t){e.copiedToClipboardSnackbar=t},expression:"copiedToClipboardSnackbar"}},[e._v(" Copied to clipboard. ")])],1)},M=[],U={name:"DomainList",props:{source:String},data:function(){return{generatedToken:null,generatedTokenText:'Click "Generate" to create a token.',copiedToClipboardSnackbar:!1}},watch:{},created:function(){J=this,F=this.$store.state,G=F.metaverseConfig.server,this.initialize()},computed:{},methods:{initialize:function(){},sendEvent:function(e,t){d["a"].$emit(e,t)},copyGeneratedToken:function(){navigator.clipboard.writeText(this.generatedToken),this.copiedToClipboardSnackbar=!0},postGenerateDomainToken:function(){var e=window.$.param({asAdmin:F.account.useAsAdmin,scope:"domain"});e="?"+e,window.$.ajax({type:"POST",url:G+"/api/v1/token/new"+e,contentType:"application/json"}).done((function(e){console.info("Successfully generated token:",e),J.generatedToken=e.data.token,J.generatedTokenText="Paste this token into your domain server."})).fail((function(e){console.info("Failed to generate token:",e),J.generatedToken=e.responseJSON.message,J.generatedTokenText="",J.$store.commit("mutate",{property:"error",with:{title:"Failed to generate token",code:"3",full:e.responseJSON.message}}),"Invalid token"!==e.responseJSON.message.toLowerCase()&&"jwt malformed"!==e.responseJSON.message.toLowerCase()||J.logout(),J.sendEvent("open-dialog",{which:"ErrorOccurred",shouldShow:!0})}))}}},z=U,R=o("2db4"),B=Object(v["a"])(z,K,M,!1,null,null,null),H=B.exports;f()(B,{VBtn:b["a"],VCard:h["a"],VCardActions:D["a"],VDivider:k["a"],VIcon:C["a"],VListItem:L["a"],VListItemContent:O["a"],VListItemSubtitle:O["b"],VListItemTitle:O["c"],VSnackbar:R["a"],VSpacer:I["a"],VTooltip:N["a"]});var W={name:"Domain",props:{source:String},components:{DomainList:P,RegisterDomain:H}},q=W,Q=o("7496"),X=o("62ad"),Y=o("a523"),Z=o("f6c4"),ee=o("0fd9"),te=Object(v["a"])(q,s,r,!1,null,null,null);t["default"]=te.exports;f()(te,{VApp:Q["a"],VCol:X["a"],VContainer:Y["a"],VMain:Z["a"],VRow:ee["a"]})}}]);
//# sourceMappingURL=chunk-2c67c9a0.151b7bc0.js.map